<!-- Footer -->
<footer class="wrapper style1 align-center">
    <div class="inner">
        <ul class="icons">
            {{ with .Site.Params.social.github }}<li><a target="_blank" href="{{.}}" class="icon brands style2 fa-github"><span class="label">Github</span></a></li>{{end}}
            {{ with .Site.Params.social.twitter }}<li><a target="_blank" href="{{.}}" class="icon brands style2 fa-twitter"><span class="label">Twitter</span></a></li>{{end}}
            {{ with .Site.Params.social.instagram }}<li><a target="_blank" href="{{.}}" class="icon brands style2 fa-instagram"><span class="label">Instagram</span></a></li>{{end}}
            {{ with .Site.Params.social.linkedin }}<li><a target="_blank" href="{{.}}" class="icon brands style2 fa-linkedin"><span class="label">LinkedIn</span></a></li>{{end}}
            {{ with .Site.Params.social.email }}<li><a target="_blank" href="mailto:{{.}}" class="fav icon style2 fa-envelope"><span class="label">Email</span></a></li>{{end}}
        </ul>
        <p>Hugo Story &copy; 2020 <a target="_blank" href="https://github.com/caressofsteel/">CaressOfSteel</a><span class="footerspacer icon fa-diamond"></span>
            Ported from <a target="_blank" href="https://html5up.net/uploads/demos/story/">Story</a> by HTML5UP<span class="footerspacer icon fa-diamond"></span>
            Images courtesy of <a target="_blank" href="https://unsplash.com">Unsplash</a></p>
</div>
</footer>

<script>
(function () {
  const root  = document.querySelector('#banner .menu-frame');
  if (!root) return;

  const frame = root.querySelector('iframe');
  const overlay = root.querySelector('.menu-frame__loader');
  if (!frame) return;

  // Give the wrapper a sensible starting height so it doesn't collapse
  // (will be replaced by real height from the iframe)
  frame.style.display = 'block';
  frame.style.width = '100%';
  frame.style.height = '64px'; // fallback until we get the real height

  function hideSpinner() {
    if (overlay) overlay.style.opacity = '0', overlay.style.visibility = 'hidden';
    root.classList.add('menu-frame--ready');
  }

  // Only accept messages from this iframe
  function fromThisFrame(e) { return e.source === frame.contentWindow; }

  window.addEventListener('message', function (e) {
    if (!fromThisFrame(e) || !e.data) return;

    // Height messages from the iframe
    if (e.data.type === 'menuSize' && typeof e.data.height === 'number') {
      // clamp to sane bounds
      const h = Math.max(40, Math.min(e.data.height, 1000));
      frame.style.height = h + 'px';
      // if we already got ready, make sure spinner is gone
      if (root.classList.contains('menu-frame--ready')) hideSpinner();
      return;
    }

    // Ready message from the iframe
    if (e.data.type === 'menuReady') {
      hideSpinner();
      return;
    }
  });

  // Fallbacks: if iframe 'load' fires but no messages, nudge after a moment
  frame.addEventListener('load', function () {
    // Ask the iframe to report height (in case its script missed load timing)
    try { frame.contentWindow.postMessage({ type: 'requestMenuSize' }, '*'); } catch {}
    setTimeout(hideSpinner, 2000);
  });

  // Ultimate failsafe
  setTimeout(hideSpinner, 15000);
})();
</script>