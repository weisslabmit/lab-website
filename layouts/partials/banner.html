<section id="banner" class="banner">
  <div class="content">
    <h1>The Weiss<br>Lab @MIT</h1>

    <div class="embed-frame menu-frame">
      <iframe
        src='{{ "embeds/menu/index.html" | absURL }}?v={{ now.Unix }}'
        title="Weiss Lab Menu"
        loading="lazy"
        referrerpolicy="no-referrer"
        sandbox="allow-same-origin allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation"
        scrolling="no"
        style="width: 100%; height: 100%; border: none;"
      ></iframe>

      <!-- Spinner overlay ONLY over the iframe -->
      <div class="menu-frame__loader" aria-hidden="true" role="status">
        <!-- ⬇️ Use your plasmid.svg; put it under /static/ as shown in step 2 -->
        <img class="menu-frame__spinner" src='{{ "plasmid.svg" | relURL }}' alt="" />
      </div>
    </div>
    
  </div>
  <a href="/admin/" class="banner-admin-btn" title="Open CMS">Admin</a>
</section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const loader = document.querySelector('.menu-frame__loader');
    const spinner = document.querySelector('.menu-frame__spinner');
    if (!loader || !spinner) return;

    // After 3s → fade out spinner
    setTimeout(() => {
      spinner.style.transition = 'opacity 0.5s ease';
      spinner.style.opacity = '0';

      // After another 0.5s → fade out white background
      setTimeout(() => {
        loader.style.transition = 'opacity 0.8s ease';
        loader.style.opacity = '0';
        setTimeout(() => loader.style.display = 'none', 800);
      }, 500);
    }, 3000);
  });
</script>
