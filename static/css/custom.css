@import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap');

/* Default site typography: Roboto Mono everywhere */
html, body,
p, li, a, nav, button, input, textarea, select,
blockquote, figcaption, small, strong, em,
.section, .inner, .content, .button, .actions, .icons {
  font-family: "Roboto Mono", monospace !important;
  font-weight: 400 !important;
  font-style: normal !important;
}



/* ======================================
   MIT Custom Styles for Hugo Story
   File: static/css/custom.css
====================================== */

/* -------------------------------
   Font definition (MIT Font)
--------------------------------*/
:root {
  --mit-font-family: "neue-haas-grotesk-display", sans-serif;
  --mit-font-weight: 700;
  --mit-font-style: normal;
}

/* -------------------------------
   Headings: use MIT font
--------------------------------*/
h1, h2, h3, h4, h5, h6 {
  font-family: var(--mit-font-family) !important;
  font-weight: var(--mit-font-weight) !important;
  font-style: var(--mit-font-style) !important;
  letter-spacing: 0.0005em;  /* <-- adds subtle spacing between letters */
  color: #6c6c6c; 
}

/* -------------------------------
   Banner: full-screen hero with title + centered menu
--------------------------------*/
#banner {
  position: relative;
  width: 100%;
  min-height: 100svh;              /* full viewport height (mobile safe) */
  min-height: 100vh;
  margin: 0;
  padding: 0 1.5rem;
  display: flex;
  align-items: center;              /* centers the whole content block */
  justify-content: center;
  text-align: center;
  border: none;
  background: none;                 /* no background by default */
  overflow: hidden;
}

/* Centered banner content (title + menu) */
#banner .content {
  position: relative;
  z-index: 2;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;          /* vertical centering inside the hero */
  gap: 0rem;                     /* space between title and menu */
  padding: 0rem 1.5rem;
  max-width: 1100px;
  width: 100%;
}

/* Banner title */
#banner .content > h1,
#banner h1 {
  font-family: var(--mit-font-family) !important;
  font-weight: var(--mit-font-weight) !important;
  font-style: var(--mit-font-style) !important;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  margin: 0;
  line-height: 1.1;
  font-size: clamp(3.5rem, calc(2rem + 3vw), 6rem);
  letter-spacing: 0.0005em;  /* <-- adds subtle spacing between letters */
  color: #000;                      /* change to #fff if using dark bg */
  white-space: pre-line !important; /* allows <br> */
  margin-bottom: 0 !important;
}

/* Hide other theme-injected banner bits */
#banner .image,
#banner .actions,
#banner p,
#banner .button,
#banner .icons,
#banner .subtitle {
  display: none !important;
}

/* -------------------------------
   Generic body reset
--------------------------------*/
body {
  margin: 0;
  color: #222;
  background: #fff;
}
/* Responsive GWD menu iframe
   - scales only below 500px
   - fills available width (no side white space)
   - no inner scrollbars */
/* Center + scale the menu iframe correctly at all widths */
.embed-frame {
  position: relative;
  z-index: 5;
  width: 100%;
  max-width: 500px;
  aspect-ratio: 500 / 350;
  margin: 0 auto;         /* centers the wrapper itself */
  overflow: hidden;
  container-type: inline-size; /* keep for 100cqw to work */
}

.embed-frame iframe {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 500px;           /* internal stage size */
  height: 350px;
  border: 0;
  display: block;

  /* center first, then scale to wrapper width */
  transform-origin: center;
  transform:
    translate(-50%, -50%)
    scale( clamp(0.2, calc(100cqw / 500px), 1) );
}

/* Tighten side spacing on small screens */
@media (max-width: 520px) {
  #banner {
    padding: 0;              /* no outer spacing */
  }

  #banner .content {
    padding: 0;              /* no inner spacing */
  }


  .embed-frame {
    max-width: 100%;     /* allow full device width */
  }
}


/* ======================================
   Limit global text scaling (balanced)
====================================== */
html { font-size: clamp(13px, 0.9vw + 0.45rem, 17px); }

h1, h2, h3, h4, h5, h6 {
  font-size: clamp(1rem, 0.7vw + 0.7rem, 1.8rem);
  line-height: 1.35;
}

p, li, blockquote, .content {
  font-size: clamp(0.9rem, 0.55vw + 0.5rem, 1.05rem);
  line-height: 1.55;
}

/* People fine-tune */
.people-section h3 { font-size: clamp(1rem, 0.45vw + 0.65rem, 1.4rem); }
.people-section .role,
.people-section .bio { font-size: clamp(0.85rem, 0.35vw + 0.45rem, 1rem); }


.menu-frame {
  position: relative;
}

/* White overlay covers the menu iframe */
.menu-frame__loader {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: white;                 /* <-- white background */
  z-index: 2;
  opacity: 1;
  transition: opacity 0.8s ease;     /* fade smoothly */
}

/* =========================================================
   Menu Spinner + Floating Nav + Section Offset
========================================================= */

.menu-frame__spinner {
  width: 200px;
  height: 200px;
  animation: menuspin 2.4s linear infinite;
}

@keyframes menuspin {
  to { transform: rotate(360deg); }
}

/* ===== Floating nav: hidden over banner, fixed after ===== */
#floating-nav {
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 1000;
  background: #282828;
  color: #fff;
  transform: translateY(-100%); /* hidden by default */
  opacity: 0;
  pointer-events: none;
  transition: transform .25s ease, opacity .25s ease;
}
#floating-nav.is-visible {
  transform: translateY(0);
  opacity: 1;
  pointer-events: auto;
}

#floating-nav .floating-nav__inner {
  max-width: 1100px;
  margin: 0 auto;
  padding: .6rem 1rem;
  display: flex;
  gap: 1.25rem;
  align-items: center;
  justify-content: center;
}

/* Baseline link style */
#floating-nav a {
  color: #fff;
  text-decoration: none;
  letter-spacing: .02em;
  opacity: .9;
  transition: opacity .2s ease, filter .2s ease;
}

html { scroll-behavior: smooth; }

/* Dim others when one is active (JS toggles .has-active) */
#floating-nav.has-active a { opacity: .45; }

/* Active link (JS adds .is-active AND inline weight 700!important) */
#floating-nav a.is-active {
  font-weight: 700 !important;  /* wins over your global 400!important */
  opacity: 1 !important;
  filter: brightness(1.2);
  text-decoration: none !important;
}

/* Hover: no underline, slight brighten */
#floating-nav a:hover { opacity: .95; text-decoration: none; }

/* Anchor landing: add small internal space at top of sections */
:root { --floating-nav-h: 56px; } /* tweak if your bar is taller */
section[id]:not(#banner) {
  position: relative;
  padding-top: 0.75rem; /* visible white space under the bar */
}

@media (max-width: 520px) {
  #floating-nav .floating-nav__inner {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    row-gap: .3rem;
  }
  #floating-nav a {
    flex: 0 1 auto;       /* don't force a width */
    white-space: nowrap;  /* keep words on one line */
    padding: 0 .5rem;
  }
}

section[id]:not(#banner) > *:first-child { margin-top: 0 !important; }
section[id]:not(#banner) .inner { padding-top: 0 !important; margin-top: 0 !important; }

/* === Real internal top spacing for sections === */
:root { --menu-height: 56px; } /* exact height of your floating nav */

section[id]:not(#banner) {
  padding-top: calc(var(--menu-height) + 1.5rem);  /* real visible white space */
}

#research-top {
  scroll-margin-top: var(--menu-height);
}

/* ===== Timeline: center + responsive downscale (no drift) ===== */
.timeline-frame {
  position: relative;
  z-index: 5;
  width: 100%;
  max-width: 1200px;          /* timeline design width */
  aspect-ratio: 1200 / 500;   /* auto height from width */
  margin: 0 auto;             /* center wrapper itself */
  overflow: hidden;
  container-type: inline-size; /* enable 100cqw for scaling calc */
}

.timeline-frame iframe {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 1200px;              /* internal stage size from GWD */
  height: 500px;
  border: 0;
  display: block;
  transform-origin: center;
  transform: translate(-50%, -50%) scale(clamp(0.2, calc(100cqw / 1200px), 1));
  will-change: transform;
}

/* Timeline spinner overlay: hidden by default */
.timeline-frame__loader {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #fff;
  z-index: 3;
  opacity: 0;
  visibility: hidden;
  transition: opacity .35s ease, visibility .35s ease; /* snappier fade */
}

/* Plasmid spinner */
.timeline-frame__spinner {
  width: 140px;
  height: 140px;
  animation: timelinespin 2.4s linear infinite;
}
@keyframes timelinespin { to { transform: rotate(360deg); } }

/* When JS adds `.is-loading` on the frame, show the overlay */
.timeline-frame.is-loading .timeline-frame__loader {
  opacity: 1;
  visibility: visible;
}


/* --- Adjust header spacing in timeline & research sections --- */
#research-timeline header.major,
#research header.major {
  margin-top: 1rem;        /* small top margin (tight to section start) */
  margin-bottom: 2.5rem;     /* more space before the content below */
  text-align: center;
}

/* Make their titles visually balanced */
#research-timeline h2,
#research header.major h2 {
  font-size: clamp(1.6rem, 1vw + 1rem, 2.2rem);
  font-weight: 700;
  line-height: 1.2;
  margin: 0;                 /* remove any default heading margins */
  padding: 0;                /* clean slate */
  color: #2a2a2a;
}


/* ============================
   PEOPLE SECTION — UNIFIED CSS
============================ */

/* Section wrapper + side breathing room */
.people-section {
  padding-inline: clamp(1rem, 4vw, 3rem);
}

/* Group headers inside People (e.g., PI, Staff, PhD Students...) */
.people-section .people-group-title {
  font-family: var(--mit-font-family, "neue-haas-grotesk-display", sans-serif);
  font-weight: 700;
  line-height: 1.15;
  margin: clamp(1rem, 2.2vw, 2rem) 0 clamp(0.5rem, 1.4vw, 1rem);
  text-align: left;
}

/* Responsive grid (unified):
   1 → 2 → 3 → 4 → 5 → 6 columns as width grows */
.people-section .people-grid {
  display: grid;
  grid-template-columns: repeat(1, minmax(0, 1fr));
  gap: 2rem;
}

@media (min-width: 600px)   { .people-section .people-grid { grid-template-columns: repeat(2, 1fr); } }
@media (min-width: 980px)   { .people-section .people-grid { grid-template-columns: repeat(3, 1fr); } }
@media (min-width: 1280px)  { .people-section .people-grid { grid-template-columns: repeat(4, 1fr); } }
@media (min-width: 1680px)  { .people-section .people-grid { grid-template-columns: repeat(5, 1fr); } }
@media (min-width: 1920px)  { .people-section .people-grid { grid-template-columns: repeat(6, 1fr); } }

/* ============================
   PEOPLE — CLEAN BASE
============================ */

/* Center the section content like your banner */
.people-section > .content {
  max-width: 1200px;
  margin-inline: auto;
  padding-inline: clamp(1rem, 4vw, 3rem);
}

/* Responsive grid for non-PI groups */
.people-section .people-grid {
  display: grid;
  grid-template-columns: repeat(1, minmax(0, 1fr));
  gap: 2rem;
}
@media (min-width: 600px)  { .people-section .people-grid { grid-template-columns: repeat(2, 1fr); } }
@media (min-width: 980px)  { .people-section .people-grid { grid-template-columns: repeat(3, 1fr); } }
@media (min-width: 1280px) { .people-section .people-grid { grid-template-columns: repeat(4, 1fr); } }
@media (min-width: 1680px) { .people-section .people-grid { grid-template-columns: repeat(5, 1fr); } }
@media (min-width: 1920px) { .people-section .people-grid { grid-template-columns: repeat(6, 1fr); } }

/* ============================
   PERSON CARD (shared styles)
============================ */
.person-card {
  text-align: center;
  padding: 0; /* keep clean; theme sometimes injects inner wrappers */
}

.person-card .image.avatar { display: inline-block; margin-bottom: 0.75rem; }
.person-card .image.avatar img {
  display: block;
  width: 160px; height: 160px;
  object-fit: cover; border-radius: 9999px;
}
@media (min-width: 900px) {
  .person-card .image.avatar img { width: 200px; height: 200px; }
}

.person-card h3 { margin: 0.25rem 0 0.25rem; line-height: 1.2; word-break: break-word; }
.person-card .role { font-weight: 600; opacity: 0.85; margin-top: -0.15rem; }
.person-card .bio  { font-size: 0.9rem; line-height: 1.45; opacity: 0.9; margin-top: 0.35rem; }

/* Obfuscated email */
.person-card .person-email,
.person-profile .person-email {
  display: block;
  margin-top: 0.35rem;
  font-family: "Roboto Mono", monospace;
  font-size: 0.9rem; /* smaller, like role */
  opacity: 0.9;
}

/* Icon row — icon only, no pill buttons */
.person-card .person-links,
.person-profile .person-links {
  display: flex; align-items: center; justify-content: center; gap: 0.6rem; margin-top: 0.5rem;
}
.person-card .person-links a,
.person-profile .person-links a {
  display: inline-flex; align-items: center; justify-content: center;
  padding: 0; min-width: 0; height: auto; border: none; background: transparent; box-shadow: none;
  opacity: 0.95; transition: transform .15s ease, opacity .15s ease;
}
.person-card .person-links a:hover,
.person-profile .person-links a:hover { opacity: 1; transform: translateY(-1px); }
.person-card .person-links svg,
.person-profile .person-links svg { width: 18px; height: 18px; display: block; }

/* ============================
   FEATURED PI ROW — aligned with grid below
============================ */

/* Wrap in same container width as grids */
.person-card.person-highlight {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(0, 1fr)); /* default safeguard */
  grid-column: 1 / -1; /* span full width */
  text-align: left;
  width: 100%;
  margin: clamp(1rem, 2vw, 1.5rem) 0;
  padding: 0;
}

/* Two-column inner layout aligned with grid below */
@media (min-width: 980px) {
  .person-card.person-highlight {
    display: grid;
    grid-template-columns: 1fr 2fr;  /* left photo ~1 column, right text ~2 columns */
    align-items: start;
    gap: 2rem;
  }
}

/* Avatar alignment (flush with first column start) */
.person-card.person-highlight .image.avatar {
  margin: 0;
  justify-self: start;
  display: block;
}
.person-card.person-highlight .image.avatar img {
  width: 100%;
  max-width: 220px;
  aspect-ratio: 1 / 1;
  height: auto;
  object-fit: cover;
  border-radius: 9999px;
}

/* Text content aligned with second grid column */
.person-card.person-highlight .content {
  align-self: center;
}

/* Stack on mobile screens */
@media (max-width: 979px) {
  .person-card.person-highlight {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }
  .person-card.person-highlight .image.avatar {
    justify-self: center;
  }
}

/* ============================
   PERSON PAGE
============================ */
.person-profile { padding-inline: clamp(1.5rem, 5vw, 4rem); }

/* Use same centered container as banner */
.people-section > .content {
  max-width: 1200px;
  margin-inline: auto;
  padding-inline: clamp(1rem, 4vw, 3rem);
}

/* Keep the standard responsive grid (you already have this) */
.people-section .people-grid {
  display: grid;
  grid-template-columns: repeat(1, minmax(0, 1fr));
  gap: 2rem;
}
@media (min-width: 600px)  { .people-section .people-grid { grid-template-columns: repeat(2, 1fr); } }
@media (min-width: 980px)  { .people-section .people-grid { grid-template-columns: repeat(3, 1fr); } }
@media (min-width: 1280px) { .people-section .people-grid { grid-template-columns: repeat(4, 1fr); } }
@media (min-width: 1680px) { .people-section .people-grid { grid-template-columns: repeat(5, 1fr); } }
@media (min-width: 1920px) { .people-section .people-grid { grid-template-columns: repeat(6, 1fr); } }

/* PI grid wrapper: no special layout—just reuse the same rails */
.people-grid--pi { margin-bottom: 0.5rem; }

/* PI card: its own inner two-column layout, but the outer left edge now snaps to the grid */
.person-card.person-highlight {
  display: grid;
  grid-template-columns: minmax(180px, 220px) 1fr;  /* photo column | text column */
  gap: 2rem;
  align-items: start;
  text-align: left;
  margin: clamp(1rem, 2vw, 1.5rem) 0;
}

.person-card.person-highlight .image.avatar { margin: 0; display: block; }
.person-card.person-highlight .image.avatar img {
  width: 100%;
  height: auto;
  aspect-ratio: 1 / 1;
  object-fit: cover;
  border-radius: 9999px;
}

/* Stack neatly on small screens */
@media (max-width: 900px) {
  .person-card.person-highlight {
    grid-template-columns: 1fr;
    gap: 1.25rem;
  }
  .person-card.person-highlight .image.avatar { justify-self: center; }
}

/* Icon-only links (no pills) */
.person-card .person-links a,
.person-profile .person-links a {
  display: inline-flex; align-items: center; justify-content: center;
  padding: 0; min-width: 0; height: auto; border: none; background: transparent; box-shadow: none;
  opacity: .95; transition: transform .15s ease, opacity .15s ease;
}
.person-card .person-links a:hover,
.person-profile .person-links a:hover { opacity: 1; transform: translateY(-1px); }
.person-card .person-links svg,
.person-profile .person-links svg { width: 18px; height: 18px; display: block; }

/* Smaller email text (matches role/title scale) */
.person-card .person-email,
.person-profile .person-email {
  font-size: 0.9rem;
  opacity: 0.9;
  font-family: "Roboto Mono", monospace;
  margin-top: 0.35rem;
}
